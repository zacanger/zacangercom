<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/javascript" src="./prism.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<link rel="stylesheet" href="z.css" type="text/css">
<link rel="alternate" type="application/rss+xml" title="subscribe" href="feed.rss">
<title>NOTES FROM DEVMOUNTAIN</title>
<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37160536-1']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        </script>
<meta name='twitter:card' content='summary' />
<meta name='twitter:site' content='@zacanger' />
<meta name='twitter:title' content='NOTES FROM DEVMOUNTAIN' />
<meta name='twitter:description' content=" This is going to be a crapton of my notes, from when I was going through the course at DevMountain.  Looking back over these, a lot of them are dumb. What I mean by this is that my opinions on things were dumb.  Whatever.  Don't take it all so serio" />
</head><body>
<div id="divbodyholder">
<div class="headerholder"><div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="http://zacanger.com/blog">angr</a></h1>
<div id="description">writings from zac anger, who is not all that angry</div>
</div></div></div>
<div id="divbody"><div class="content">
<!-- entry begin -->
<h3><a class="ablack" href="notes-from-devmountain.html">
NOTES FROM DEVMOUNTAIN
</a></h3>
<div class="subtitle">May 01, 2016  &mdash; 
Zac Anger</div>
<!-- text begin -->

<p>This is going to be a crapton of my notes, from when I was going through the course at DevMountain.</p>

<p>Looking back over these, a lot of them are dumb. What I mean by this is that my opinions on things were dumb.</p>

<p>Whatever.</p>

<p>Don't take it all so seriously. Some of it could be really helpful. This is about half of my collected
notes <em>that were inside project files</em>. Everything else has already been cleaned up and posted, or is in
a directory of drafts somewhere. This stuff is totally unedited.</p>

<hr />

<h2>angular: directives</h2>

<p>directives are different than controllers and services. directives ALWAYS return an object. when you write a
ctrl or svc you're giving some definitions to something that already exists. with directives you're closer
to writing routing. you're writing a set of instructions. they return an object. objects get, obviously,
key-value pairs.</p>

<pre><code>.directive('myDirective', function(){
    return {
        template: 'Key: Value, key: value';
    }
})
</code></pre>

<p>directive names MUST be camelCase. pascal case will not be recognized. nor snake case?</p>

<p>i mean, really, it's all made a lot more complicated than it needs to be. we're starting out basically
just making our own little bits. it makes sense. if it works as a template file, or as just regular html,
it'll work as a custom directive. just more reusable as a directive.</p>

<p>we could have a directive with a TYPE. imagine a function that returns a customer with an attribute that's
.type... so we'd have a directive called myCustomer, type="name", then another, type="smoking habits".
paramaters here are always (element, attribute).</p>

<p>Restrict as a property: E means element (so you'd do <myDirective> instead of <div myDirective>
A is attribute, so it'd be <div myDirective>
can do BOTH so it'd work for either. (restrict: EA)
C is for class, but let's not do that! That seems like a really not okay and very bad idea.
This is basically for semantic enforcement. Element would be good for a custom block, eg
<myDirective>a whole bunch of shit just about this one</myDirective>
<mySECONDdirective>another whole bunch</mySECONDdirective> etc
A would be good for tacking things onto elements that would likely be there anyway, it seems.
If you need to take in parameters, A would be better.</p>

<p>custom filters like this!</p>

<pre><code>&lt;input model="whatcha"&gt;
&lt;span custom="format"&gt;
function link(scope, element, attributes){
var whatever
stuffings
}
return { link: link; }
scp.$watch('format', function(value){
format=value;
updateTime();
});
</code></pre>

<p>link ALWAYS takes in at leaste those three, and alkways in that order!</p>

<p>inside a directive, feel free to do some jquery-lite.
if you want to use, say, d3, or three.js, you can go ahead and inject that into angular
and use it. (we're talking about other DOM manupilation, not utilities like lodash).</p>

<p>inside a link whatever, that scp refers to its parent's scope, it shares parent's scope
by default. eg if custom up there is directly below mainCtrl, scp means mainCtrl's $scope.</p>

<p>underneath .directive, the scope: { stuff } actually means, like, scope INSTRUCTIONS or
somesuch.</p>

<p>SCOPE</p>

<pre><code>scope: {
string: '@',
link: '=',
func: '&amp;'
}
</code></pre>

<p>The properties on the scope object represent the attributes on the directive in the html. Our example scope object here would look something like this in the html.
<code>&lt;example-directive string="a string" link="user" func="updateUser()"&gt;&lt;/example-directive&gt;</code>
The hard part here is the <code>@</code>, <code>=</code>, and <code>&amp;</code>. They each have very important and distinct meanings.</p>

<ul>
<li><code>@</code> says take in my attribute value as a string.</li>
<li><code>=</code> says take in my attribute value as a two-way bound variable from the parent scope.</li>
<li><code>&amp;</code> says take in my attribute value as a reference to a function on the parent scope.</li>
</ul>

<hr />

<h2>firebase</h2>

<p>firebase with $firebaseObject (or $firebaseArray) and $bindTo just makes all
the <strong>MAGIC</strong> (that we poor slobs are are too dumb to even vaguely comprehend)
even MORE magical; with angularfire and firebase and angular doing everything
for you, we now have, basically, a subpar meteor-like 3-way-binding.</p>

<p><code>&lt;ng-change="$scope.save(thingy)"&gt;</code> will propogate back to firebase
(or <code>&lt;ng-change="thingy(save)"&gt; // $scope.sav(thingy)</code> if we're doing things
modularly).</p>

<p><code>ng-model-options="{debounce: {'default': 5000}}" // debounces. to 5000 ms. wowe.</code></p>

<hr />

<h2>express</h2>

<ul>
<li>if chain in express:</li>
<li>method, url, callback</li>
<li><code>app.all('/endpoint', function(){console.log('a thing')})</code></li>
<li>so it's one long chain of if statements. like we do manually. that's all.</li>
<li>express chain [{method: 'all', endpoint:'/endpoint', function(){}, {method: 'get', endpoint:'/nextone'}etc etc etc etc}]d</li>
<li>all endpoints are hit, with exception dependent on response</li>
<li>req and res are passed to EVERY function by express</li>
<li>ongoing request and response are passed on down whole if statement chain</li>
<li>a controller can't reference arrays from another file.
<ul>
<li>so, your server (or, let's say, your index) couldn't have something defined that a ctrl needs to access</li>
<li>(assuming your ctrl is set up as a an object, module.exports = {} with your functions(req, res, next) all in there.)</li>
<li>solution?</li>
<li>move your stuff into the file where you want to access it, i guess.</li>
<li>module.exports can be an array, too. that makes sense in a db context, okay.</li>
</ul></li>
</ul>

<hr />

<h2>express more</h2>

<h4>req.params vs req.query</h4>

<ul>
<li>Params and Query do the same thing.</li>
<li>Params is hardcoded into endpoint; query allows some flexibility.</li>
<li>Query uses http://url.url/api/endpoint?whatever=something</li>
<li><p>Param would be more like http://url.url/api/endpoint/something</p>

<p>app.get('api/hobbies/:type/:fun', function(req, res){
  req.params.type // boring
  hobbies.forEach(function(hobby){
    if (hobby.type = req.params.type) {
      res.send(hobby)
    }
  })
});</p>

<p>localhost:8989/api/hobbies/boring/no</p>

<p>app.get('api/hobbies', function(req, res){
  req.query.type // boring
  hobbies.forEach(function(hobby){
    if (hobby.type = req.query.type) {
      res.send(hobby)
    }
  })
})</p>

<p>localhost:8989/api/hobbies?type=boring&amp;fun=no</p>

<p>var hobbies = [];</p></li>
</ul>

<h4>how to not need to use express-cors (or whatever-cors)</h4>

<pre><code>var express = require('express');
var request = require('request');

var app = express();
app.use('/', function(req, res) {
  var url = apiServerHost + req.url;
  req.pipe(request(url)).pipe(res);
});

app.listen(process.env.PORT || 3000);
</code></pre>

<p>OBVIOUSLY this only applies when everything's local; this is a proxy server, essentially, sort of.</p>

<p>also there's an express builtin: <code>app.use(express.static()</code>, eg <code>app.use(express.static('public'))</code></p>

<h4>monogooooooooooo(se)</h4>

<p>Turns out if you send Mongoose anything that's not in your schema, it's just like "Oh, okay, I'm not interested" and tosses that bit out, I guess.</p>

<p>When we're not doing eg <code>require('./path')</code> (but rather <code>require(/path)' with no dot first</code>), it looks in <code>node_modules/</code>. Obvs usually we'll probably look from cwd instead. Any way to look from project root by default?</p>

<pre><code>getStuff: function(req, res){
  Stuff.find().populate('things.whatevers').exec()
    .then(function(data, err)
// etc., etc., etc., etc.
</code></pre>

<hr />

<h2>ionic</h2>

<ul>
<li>We're getting a little super-fast (read: unplanned and, I think, unannounced) rundown on Ionic.</li>
<li>Which is totally fine, but it's basically Angular, plus Phonegap, which are two things I rather dislike.</li>
<li>Okay, I'm using the Yeoman generator-ionic-gulp seed.</li>
<li>Aaaaand this is just like Angular, except with predefined CSS rules, basically.</li>
<li>The 'magic' is all in the bit where it handles compiling/wrapping for you.</li>
<li>So... on with my personal project, I suppose.</li>
</ul>

<hr />

<h2>D3</h2>

<ul>
<li>svg starts 0,0 top left, not bottom left.</li>
<li>svg has no z-index. just renders in order it's written.</li>
<li>rotations and transforms on svg will screw with things when it comes to moving stuff!</li>
<li>d3, chaining methods super common.</li>
</ul>

<hr />

<h2>react</h2>

<ul>
<li>react is reacty. it reacts, sometimes reactively.</li>
<li>it's still ugly as hell and i hope it dies, though.</li>
<li>note that i'm doing all this in vim because:
<ul>
<li>A. lighttable doesn't like react and</li>
<li>B. lighttable has my projects loadded up, currently, and i don't want to add yet another workspace.</li>
</ul></li>
<li>so, this will probably all be formatted like shit, because vim doesn't understand, no matter how many times i tell it, that i don't want it to turn spaces into tabs, i want the opposite.</li>
<li>oh well.</li>
</ul>

<hr />

<h2>S3</h2>

<ul>
<li>Basically, since Mongo can't store images without doing difficult-ish things involving GridFS,
the prescription is to use S3 in... basically the same way, actually, which results in more total requests,
but the hope is that Amazon's caching or somesuch is good enough to offset the latency.</li>
<li>Amazon needs your regional server to be passed in during requests. Which is both sensible and silly, since really that should be a part of your keys.</li>
<li>When Amazon wants a 'Key' in your paramss, that's not a key. That's the actual thing you're fuckin' with. so, req.body.img.</li>
<li>Buffers in node are bytes in python are strings in PHP if they were mutable.</li>
</ul>

<hr />

<h2>deployment while in development</h2>

<h3>heroku</h3>

<ul>
<li>workflow: have a project. have a git repo in it. <code>heroku create</code>, assuming you use/have heroku.</li>
<li>(same as <code>git remote add heroku https://someurl.herokuapp.com</code>)</li>
</ul>

<h3>digital ocean</h3>

<ul>
<li>digital ocean: works the same as ever, which is to say, it's not convenient,
but it it's okay. prefer koding if they let me back in, but if not,
maybe using codeanywhere/codenvy/c9/any one of the other IDEs with built in dev servers.</li>
</ul>

<hr />

<p>...that's all, for now. There will probably be more, once I sort through the first three weeks' worth of shit.</p>

<p>tags: <a href='tag_notes.html'>notes</a>, <a href='tag_devmountain.html'>devmountain</a>, <a href='tag_lol.html'>lol</a>, <a href='tag_i-am-ridiculous.html'>i-am-ridiculous</a>, <a href='tag_directives.html'>directives</a>, <a href='tag_angular.html'>angular</a>, <a href='tag_firebase.html'>firebase</a>, <a href='tag_express.html'>express</a>, <a href='tag_mongo.html'>mongo</a>, <a href='tag_mongoose.html'>mongoose</a>, <a href='tag_node.html'>node</a>, <a href='tag_ionic.html'>ionic</a>, <a href='tag_d3.html'>d3</a>, <a href='tag_react.html'>react</a>, <a href='tag_heroku.html'>heroku</a>, <a href='tag_digital-ocean.html'>digital-ocean</a></p>

<!-- text end -->
<p id='twitter'><a href='http://twitter.com/intent/tweet?url=http://zacanger.com/blog/notes-from-devmountain.html&text=&lt;say nice things about me&gt;&via=zacanger'>so, tweet it?</a> 
<a href='https://twitter.com/search?q=http://zacanger.com/blog/notes-from-devmountain.html'><span id='count-32210'></span></a>&nbsp;</p>
<!-- entry end -->
</div>
<div id="footer">WTFPL <a href="http://twitter.com/zacanger">Zac Anger</a> &mdash; <a href="mailto:zac&#64;zacanger&#46;com">zac&#64;zacanger&#46;com</a><br>
written in <a href="https://daringfireball.net/projects/markdown/">markdown</a> and generated with a <a href="http://tiswww.case.edu/php/chet/bash/bashtop.html">shell script</a></div>
<a href="http://zacanger.com/me">zac anger?</a>
</div></div>
</body></html>
